<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <button id="button01" style="position:absolute;top:1vw;left:45%;width:10vw">開關</button>
        <img src="https://farm8.staticflickr.com/7845/46422176305_004d882a97_o.jpg" style="position:absolute;top:5vw;left:35vw;width:30vw;z-index:-1">
    </body>
</html>
<script type="text/javascript">

var onoff=1;

class Light {
    constructor(x,y) {  
    this.element = document.createElement ('div');
    this.element.id = 'light';
    this.element.style.cssText = "position:absolute;width:20px;height:20px;border-radius:15px;z-index:1"; 
        this.element.style.top = x;
    this.element.style.left = y;
    this.element.style.background = "hsl(89, 43%, 51%)";
    document.getElementsByTagName('body')[0].appendChild(this.element);
  }
  
  
  	changeColor(key,hue) {
    var self = this;
    if(key==1){
    	key=0;
    	self.element.style.background = "hsl(0, 0%, 20%)";
    }
    else if(onoff==1){
    	key=1;
    	self.element.style.background = "hsl(" + hue + ", 43%, 51%)";
    }
    var duty_cycle = Math.random()*1500;
    setTimeout (function() { self.changeColor(key,hue) } , duty_cycle);
  }

}

main();

function main() {
    document.getElementById("button01").onclick=function(){light_switch()};
    var light = [];
    light[0] = new Light('15vw','47vw');
    light[1] = new Light('20vw','50vw');
    light[2] = new Light('23vw','45vw');
    light[3] = new Light('26vw','52vw');
    light[4] = new Light('30vw','55vw');
    light[5] = new Light('32vw','46vw');
    light[6] = new Light('35vw','52vw');
    light[7] = new Light('38vw','40vw');
    light[8] = new Light('39vw','55vw');
    light[9] = new Light('40vw','48vw');
    for(let i=0;i<10;i++){
        var key = 1;
        var hue = Math.random()*200;
            light[i].changeColor(key,hue);
    }
}

function light_switch(){
    if(onoff==0)
        onoff=1;
    else
   	onoff=0;
}

</script>
